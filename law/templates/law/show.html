{% extends "base.html" %}

{% block javascript %}
<script language="javascript" type="text/javascript">
    var elements = document.querySelectorAll(".menu-item");
    elements.forEach(function(element) {
        element.addEventListener('click', function(event) {
            let tag = this.getAttribute("data-tag");
            let nr = this.getAttribute("data-nr");
            let selector = tag + "[nr='" + nr + "']";
            let elem = document.querySelector(selector)
            elem.scrollIntoView();
            window.scrollBy(0, -70);  // 70 is estimated header height.
        });
    });
</script>
{% endblock %}

{% block title %}{{ law.identifier }}: {{ law.name }}{% endblock %}

{% block left %}

<div class="legal-document menu">
    <ul>
    {% for chapter in law.chapters %}
        <li>
            <a class="menu-item" data-tag="chapter" data-nr="{{ chapter.nr }}">
                {% if chapter.name %}
                    {{ chapter.name }}
                {% else %}
                    {{ chapter.nr_title }}
                {% endif %}
            </a>
            <ul>
            {% for art in chapter.articles %}
                <li>
                    <a class="menu-item" data-tag="art" data-nr="{{ art.nr }}">
                        {% if art.name %}
                            {{ art.name }}
                        {% else %}
                            {{ art.nr_title }}
                        {% endif %}
                    </a>
                </li>
            {% endfor %}
            </ul>
        </li>
    {% endfor %}
    </ul>
</div>

{% endblock %}

{% block content %}

{% include 'law/dialog/quick_dialog.html' %}

<div class="legal-document content">
    {{ law.html_text|safe }}
</div>

{% endblock %}
